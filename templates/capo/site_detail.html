{% extends "shared/base.html" %}
{% set lang = request.cookies.get('lang', 'it') %}

{% block title %}
    {% if lang == 'fr' %}Détail chantier – Chef d'équipe – Lenta France{% else %}Scheda cantiere – Caposquadra – Lenta France{% endif %}
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-header-main">
        <p class="page-eyebrow">
            {% if lang == 'fr' %}Espace Chef d'équipe{% else %}Area caposquadra{% endif %}
        </p>
        <h1 class="page-title">
            <span class="page-icon page-icon--sites" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 11.5L12 5l8 6.5V20H4z" stroke-linejoin="round" />
                    <path d="M10 20v-5h4v5" stroke-linecap="round" />
                </svg>
            </span>
            {{ site.name }}
        </h1>
        <p class="page-subtitle">
            {% if lang == 'fr' %}
                Détails du chantier assigné.
            {% else %}
                Dettagli del cantiere assegnato.
            {% endif %}
        </p>
    </div>
    <div class="page-actions">
        <a href="/capo/dashboard" class="btn btn-secondary">
            {% if lang == 'fr' %}Retour au tableau de bord{% else %}Torna alla dashboard{% endif %}
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <p><strong>{% if lang == 'fr' %}Code{% else %}Codice{% endif %}:</strong> {{ site.code or '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Adresse{% else %}Indirizzo{% endif %}:</strong> {{ site.address or '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Ville{% else %}Città{% endif %}:</strong> {{ site.city or '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Pays{% else %}Paese{% endif %}:</strong> {{ site.country or '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Statut{% else %}Stato{% endif %}:</strong> {{ site.status.value if site.status else '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Début{% else %}Inizio{% endif %}:</strong> {{ site.start_date.strftime("%d/%m/%Y") if site.start_date else '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Fin{% else %}Fine{% endif %}:</strong> {{ site.end_date.strftime("%d/%m/%Y") if site.end_date else '—' }}</p>
        <p><strong>{% if lang == 'fr' %}Coordonnées{% else %}Coordinate{% endif %}:</strong>
            {% if site.lat is not none and site.lng is not none %}
                {{ site.lat }}, {{ site.lng }}
            {% else %}
                —
            {% endif %}
        </p>
    </div>
</div>
{% endblock %}
