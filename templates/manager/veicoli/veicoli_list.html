{% extends "base.html" %}
{% set lang = request.cookies.get('lang', 'it') %}

{% block title %}
    {% if lang == 'fr' %}V√©hicules ‚Äì Manager{% else %}Veicoli ‚Äì Manager{% endif %}
{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">
            üöê {% if lang == 'fr' %}V√©hicules{% else %}Veicoli{% endif %}
        </h1>
        <p class="page-subtitle">
            {% if lang == 'fr' %}
                G√©rez les v√©hicules d'entreprise, les plaques, le kilom√©trage et les √©ch√©ances.
            {% else %}
                Gestisci i veicoli aziendali, targhe, chilometraggio e scadenze.
            {% endif %}
        </p>
    </div>
    <div class="header-actions">
        <a href="{{ url_for('manager_veicoli_new') }}" class="btn btn-primary">
            ‚ûï {% if lang == 'fr' %}Nouveau v√©hicule{% else %}Nuovo veicolo{% endif %}
        </a>
    </div>
</div>

<div class="card table-card">
    <table class="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>{% if lang == 'fr' %}Marque{% else %}Marca{% endif %}</th>
                <th>{% if lang == 'fr' %}Mod√®le{% else %}Modello{% endif %}</th>
                <th>{% if lang == 'fr' %}Plaque{% else %}Targa{% endif %}</th>
                <th>{% if lang == 'fr' %}Ann√©e{% else %}Anno{% endif %}</th>
                <th>Km</th>
                <th>{% if lang == 'fr' %}Carburant{% else %}Carburante{% endif %}</th>
                <th>{% if lang == 'fr' %}Assign√© √†{% else %}Assegnato a{% endif %}</th>
                <th class="table-actions-col">
                    {% if lang == 'fr' %}Actions{% else %}Azioni{% endif %}
                </th>
            </tr>
        </thead>
        <tbody>
            {% for v in veicoli %}
                <tr>
                    <td>#{{ v.id }}</td>
                    <td>{{ v.marca }}</td>
                    <td>{{ v.modello }}</td>
                    <td>{{ v.targa }}</td>
                    <td>{{ v.anno or '‚Äî' }}</td>
                    <td>{{ v.km or '‚Äî' }}</td>
                    <td>{{ v.carburante or '‚Äî' }}</td>
                    <td>{{ v.assegnato_a_id or '‚Äî' }}</td>
                    <td class="table-actions">
                        <a class="btn btn-secondary btn-sm"
                           href="{{ url_for('manager_veicoli_edit', veicolo_id=v.id) }}">
                            ‚úèÔ∏è {% if lang == 'fr' %}Modifier{% else %}Modifica{% endif %}
                        </a>
                        <form method="post"
                              action="{{ url_for('manager_veicoli_delete', veicolo_id=v.id) }}"
                              style="display:inline;">
                            <button type="submit"
                                    class="btn btn-danger btn-sm"
                                    onclick="return confirm('{% if lang == 'fr' %}Supprimer ce v√©hicule ?{% else %}Eliminare questo veicolo?{% endif %}');">
                                üóëÔ∏è {% if lang == 'fr' %}Supprimer{% else %}Elimina{% endif %}
                            </button>
                        </form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="9" class="table-empty">
                        {% if lang == 'fr' %}
                            Aucun v√©hicule enregistr√© pour le moment.
                        {% else %}
                            Nessun veicolo registrato al momento.
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
