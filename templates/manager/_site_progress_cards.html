{% set lang = request.cookies.get('lang', 'it') %}

<section class="site-progress-section" id="site-progress">
    <h2 class="page-title">
        {% if lang == 'fr' %}Avancement chantier{% else %}Avanzamento lavori{% endif %}
    </h2>
    <p class="page-subtitle text-muted">
        {% if lang == 'fr' %}
            Synthèse des macro-phases avec progression actuelle.
        {% else %}
            Sintesi delle macro-fasi con avanzamento aggiornato.
        {% endif %}
    </p>

    <div class="site-progress-cards">
        <!-- TODO: collegare il click della card alla pagina/modale di dettaglio della macro -->
        <div class="site-progress-card" role="button">
            <div class="site-progress-card-title">
                {% if lang == 'fr' %}Cordons guides{% else %}Cordoli guida{% endif %}
            </div>
            <div class="site-progress-card-percent">
                {{ progress_summary.cordoli.percent }}%
            </div>
            <div class="site-progress-card-bar" aria-hidden="true">
                <div class="site-progress-card-bar-fill" style="width: {{ progress_summary.cordoli.percent }}%;"></div>
            </div>
            <div class="site-progress-card-sub">
                {{ progress_summary.cordoli.subtitle }}
            </div>
        </div>

        <div class="site-progress-card" role="button">
            <div class="site-progress-card-title">
                {% if lang == 'fr' %}Parois / excavation{% else %}Scavo + paratie{% endif %}
            </div>
            <div class="site-progress-card-percent">
                {{ progress_summary.paratie.percent }}%
            </div>
            <div class="site-progress-card-bar" aria-hidden="true">
                <div class="site-progress-card-bar-fill" style="width: {{ progress_summary.paratie.percent }}%;"></div>
            </div>
            <div class="site-progress-card-sub">
                {{ progress_summary.paratie.subtitle }}
            </div>
        </div>

        <div class="site-progress-card" role="button">
            <div class="site-progress-card-title">
                {% if lang == 'fr' %}Étais{% else %}Posa puntoni{% endif %}
            </div>
            <div class="site-progress-card-percent">
                {{ progress_summary.puntoni.percent }}%
            </div>
            <div class="site-progress-card-bar" aria-hidden="true">
                <div class="site-progress-card-bar-fill" style="width: {{ progress_summary.puntoni.percent }}%;"></div>
            </div>
            <div class="site-progress-card-sub">
                {{ progress_summary.puntoni.subtitle }}
            </div>
        </div>
    </div>
</section>
