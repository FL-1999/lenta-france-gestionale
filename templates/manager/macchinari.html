{% extends "base.html" %}

{% block title %}Macchinari â€“ Manager{% endblock %}

{% block content %}
<h1 class="page-title">ðŸšœ Macchinari</h1>
<p class="page-subtitle">Elenco di tutti i macchinari registrati.</p>

<div class="actions">
  <a href="/manager/macchinari/nuovo" class="btn btn-primary">âž• Nuovo macchinario</a>
</div>

{% if machines and machines|length > 0 %}
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Codice</th>
        <th>Tipo</th>
        <th>Cantiere associato</th>
        <th>Attivo</th>
        <th>Azioni</th>
      </tr>
    </thead>
    <tbody>
      {% for m in machines %}
      <tr>
        <td>{{ m.name }}</td>
        <td>{{ m.code if hasattr(m, "code") else "" }}</td>
        <td>
          {% if hasattr(m, "machine_type") %}
            {{ m.machine_type.value if hasattr(m.machine_type, "value") else m.machine_type }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>
          {% if m.site %}
            {{ m.site.name }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ "SÃ¬" if m.is_active else "No" }}</td>
        <td>
          <div class="table-actions">
            <a href="/manager/macchinari/{{ m.id }}" class="btn btn-link">Dettaglio</a>
            <a href="/manager/macchinari/modifica/{{ m.id }}" class="btn btn-link">Modifica</a>
            <a href="/manager/macchinari/assegna/{{ m.id }}" class="btn btn-link">Assegna a cantiere</a>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<p>Nessun macchinario presente.</p>
{% endif %}
{% endblock %}
